(()=>{"use strict";const e=document.querySelector(".add-task"),t=document.querySelector("#enter-task"),r=document.querySelector("#group-name"),o=document.querySelector("#group-container"),n=document.querySelector(".add-group"),a=document.querySelector("#delete-group"),d=document.querySelector("#gErrMsg"),c=document.querySelector("#submit-task"),s=document.querySelector("#task-name"),l=document.querySelector("#due-date"),i=document.querySelector("#select-priority"),u=document.querySelector("#describe-task");let m;document.querySelector("#task-box");const g=[{id:Date.now().toString(),name:"Travelling",tasks:[{name:"Travell to Lagos"},{dueDate:"2020-01-15"},{description:"Attend an interview for a big job"},{priority:"High Priority"}]}],y=()=>{localStorage.setItem("myTodoArray",JSON.stringify(m))},p=()=>{m=localStorage.getItem("myTodoArray")?JSON.parse(localStorage.getItem("myTodoArray")):g},v=()=>{p(),o.innerHTML="",m.forEach((e=>{const t=`\n    <p id=${e.id}>${e.name}</p>`;o.insertAdjacentHTML("afterbegin",t)}))};let L=[];let S="",k="",q="",E="",f=!1;document.addEventListener("DOMContentLoaded",(()=>{t.classList.add("no-display"),v()})),e.addEventListener("click",(()=>{t.classList.toggle("no-display")})),n.addEventListener("submit",(e=>{e.preventDefault(),(()=>{const e={id:Date.now().toString(),name:r.value.toUpperCase(),tasks:[]},t=e.name;0===m.length||""===((e,t)=>{let r="";if(0!==e.length&&null!==e)return e.forEach((o=>{o.name===t&&(r=e.indexOf(t))})),r})(m,t)&&""!==r.value?(p(),m.push(e),y(),d.innerHTML="",r.classList.remove("red-border")):(d.innerHTML="Duplicate or Empty Group Name not Allowed",d.classList.add("group-duplicate"),r.classList.add("red-border"))})(),v()}));o.addEventListener("click",(e=>{e.preventDefault();(e=>{m.forEach((t=>{if(e===t.name){S=t.id;let e=t.tasks;k=document.getElementById(S),k.classList.add("active-group"),(e=>{L=e})(e),f=!0}else q=t.id,E=document.getElementById(q),E.classList.remove("active-group")}))})(e.target.innerHTML)})),a.addEventListener("click",(()=>{f&&((e,t)=>{const r=e.findIndex((e=>e.id===t));e.splice(r,1),y()})(m,S),f=!1,v()})),c.addEventListener("click",(()=>{(()=>{const e={name:s.value,dateDue:l.value,priority:i.value,describe:u.value};p(),L.push(e),y(),console.log("Form submitted"),console.log(L)})()}))})();